{"version":3,"file":"mixer-status.js","sourceRoot":"","sources":["../../src/packets/mixer-status.ts"],"names":[],"mappings":";;AACA,6CAAqD;AAErD,MAAM,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC;IACvB,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI;CACnE,CAAC,CAAC;AAYU,QAAA,IAAI,GAAG,CAAC,MAAc,EAAW,EAAE,CAC5C,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;AAErC,QAAA,KAAK,GAAG,CAAC,MAAc,EAAe,EAAE;IACjD,MAAM,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC;IAC5B,MAAM,IAAI,GAAG,MAAM,CAAC,QAAQ,CAAC,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;IACjD,MAAM,KAAK,GAAG,wBAAW,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;IACxC,MAAM,KAAK,GAAG,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;IACvC,MAAM,GAAG,GAAG,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;IACrC,OAAO;QACH,MAAM;QACN,IAAI;QACJ,KAAK;QACL,KAAK,EAAE;YACH,KAAK;YACL,GAAG;SACN;KACJ,CAAC;AACN,CAAC,CAAC","sourcesContent":["import { CDJStateFlags } from '../constants';\nimport { CDJState, mapCdjState } from './cdj-status';\n\nconst header = Buffer.from([\n    0x51, 0x73, 0x70, 0x74, 0x31, 0x57, 0x6d, 0x4a, 0x4f, 0x4c, 0x29\n]);\n\nexport interface MixerStatus {\n    name: string;\n    device: number;\n    state: CDJState;\n    speed: {\n        pitch: number;\n        bpm: number;\n    }\n}\n\nexport const test = (buffer: Buffer): boolean =>\n    buffer.slice(0, header.length).equals(header);\n\nexport const parse = (buffer: Buffer): MixerStatus => {\n    const device = buffer[0x21];\n    const name = buffer.toString('utf8', 0x0b, 0x1e);\n    const state = mapCdjState(buffer[0x27]);\n    const pitch = buffer.readInt32BE(0x28);\n    const bpm = buffer.readInt16BE(0x2e);\n    return {\n        device,\n        name,\n        state,\n        speed: {\n            pitch,\n            bpm\n        }\n    };\n};"]}