{"version":3,"file":"timing.js","sourceRoot":"","sources":["../../src/packets/timing.ts"],"names":[],"mappings":";;AAAA,MAAM,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC;IACvB,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI;CACnE,CAAC,CAAC;AAYU,QAAA,IAAI,GAAG,CAAC,MAAc,EAAW,EAAE,CAC5C,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;AAErC,QAAA,KAAK,GAAG,CAAC,MAAc,EAAgB,EAAE;IAClD,MAAM,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC;IAC5B,MAAM,IAAI,GAAG,MAAM,CAAC,QAAQ,CAAC,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;IACjD,MAAM,QAAQ,GAAG,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;IAC1C,MAAM,KAAK,GAAG,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;IACvC,MAAM,OAAO,GAAG,CAAC,QAAQ,GAAG,KAAK,CAAC,GAAG,SAAS,CAAC;IAC/C,OAAO;QACH,KAAK,EAAE;YACH,QAAQ;YACR,KAAK;YACL,OAAO;SACV;QACD,MAAM;QACN,IAAI;KACP,CAAC;AACN,CAAC,CAAC","sourcesContent":["const header = Buffer.from([\n    0x51, 0x73, 0x70, 0x74, 0x31, 0x57, 0x6d, 0x4a, 0x4f, 0x4c, 0x28\n]);\n\nexport interface TimingPacket {\n    speed: {\n        original: number;\n        pitch: number;\n        current: number;\n    }\n    device: number;\n    name: string;\n}\n\nexport const test = (buffer: Buffer): boolean =>\n    buffer.slice(0, header.length).equals(header);\n\nexport const parse = (buffer: Buffer): TimingPacket => {\n    const device = buffer[0x21];\n    const name = buffer.toString('utf8', 0x0b, 0x1e);\n    const original = buffer.readInt16BE(0x5a);\n    const pitch = buffer.readInt32BE(0x54);\n    const current = (original * pitch) / 0x6400000;\n    return {\n        speed: {\n            original,\n            pitch,\n            current,\n        },\n        device,\n        name\n    };\n};"]}